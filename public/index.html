<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installeer IPTV Voorbeeld Addon</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #1e1e2a; color: #f0f0f0; display: flex; justify-content: center; align-items: center; text-align: center; }
        .container { max-width: 600px; padding: 20px; box-sizing: border-box; }
        .logo { width: 80px; height: 80px; margin: 0 auto 20px auto; border-radius: 12px; }
        h1 { font-size: 2em; margin-bottom: 10px; color: #ffffff; }
        p { font-size: 1.1em; line-height: 1.6; margin-bottom: 30px; color: #a0a0b0; }
        .install-button { display: inline-block; background-color: #6c4de2; color: #ffffff; padding: 15px 30px; font-size: 1.2em; font-weight: bold; border: none; border-radius: 8px; text-decoration: none; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; }
        .install-button:hover { background-color: #583ac4; }
        .install-button:active { transform: scale(0.98); }
    </style>
</head>
<body>

    <div class="container">
        <img src="https://www.stremio.com/website/stremio-logo-small.png" alt="Addon Logo" class="logo">
        <h1>IPTV Voorbeeld Addon</h1>
        <p>
            Installeer deze addon om een selectie van live tv-zenders direct op je Stremio-homepage te bekijken.
        </p>
        <button onclick="installAddon()" class="install-button">
            Installeer Addon
        </button>
    </div>

    <script>
        /**
         * Deze functie bouwt de correcte Stremio installatielink en opent deze.
         */
        function installAddon() {
            // FOUT: window.location.origin bevat 'https://', wat Stremio niet accepteert.
            // const manifestUrl = window.location.origin + '/api/addon/manifest.json';
            
            // CORRECT: window.location.host bevat alleen de hostnaam (bv. 'jouw-app.vercel.app').
            const host = window.location.host;
            const path = '/api/addon/manifest.json';
            
            // Bouw de Stremio deep link in het juiste formaat.
            const installUrl = 'stremio://' + host + path;
            
            console.log('Poging tot installatie via URL:', installUrl);

            // Stuur de gebruiker door naar de installatielink.
            window.location.href = installUrl;
        }
    </script>

</body>
</html>